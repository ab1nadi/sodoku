(()=>{"use strict";class t{puzzle=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];gen(){let t=new e;for(var s=1;12!=s;){var i=Math.floor(9*Math.random()),r=Math.floor(9*Math.random()),n=Math.floor(9*Math.random()+1);0==this.puzzle[r][i]&&this.checkValidity(i,r,n)&&(this.puzzle[r][i]=n,s++)}return t.solve(this.puzzle),console.log(t.puzzle),JSON.parse(JSON.stringify(t.puzzle))}isPuzzleFilled(){for(var t=0;t<this.puzzle.length;t++)if(9!=this.puzzle[t].length)return!1;return!0}checkValidity(t,e,s){for(var i=0;i<9;i++)if(s==this.puzzle[i][t])return!1;for(i=0;i<9;i++)if(s==this.puzzle[e][i])return!1;var r=3*Math.floor(e/3),n=3*Math.floor(t/3);for(i=0;i<3;i++)for(var o=0;o<3;o++){var a=r+o,l=n+i;if(this.puzzle[a][l]==s)return!1}return!0}print(){for(var t=0;t<9;t++)console.log(this.puzzle[t][0]+" "+this.puzzle[t][1]+" "+this.puzzle[t][2]+" "+this.puzzle[t][3]+" "+this.puzzle[t][4]+" "+this.puzzle[t][5]+" "+this.puzzle[t][6]+" "+this.puzzle[t][7]+" "+this.puzzle[t][8])}}class e{root=null;start=null;puzzle=[];missing=[];solve(t){return this.puzzle=JSON.parse(JSON.stringify(t)),this.findMissing(),this.traverse(!1),this.puzzle}doesSolExist(t){return this.puzzle=JSON.parse(JSON.stringify(t)),this.findMissing(),this.traverse(!1)}solveMulti(t){return this.puzzle=JSON.parse(JSON.stringify(t)),this.findMissing(),this.traverse(!0)}findMissing(){for(var t=0;t<9;t++)for(var e=0;e<9;e++)0==this.puzzle[t][e]&&this.missing.push({r:t,c:e,num:1})}traverse(t){for(var e=!1,s=0,i=[];!e;){for(var r=this.missing[s],n=!1;!n;)if(this.checkValidity(r.r,r.c,r.num)?(this.puzzle[r.r][r.c]=r.num,n=!0):r.num++,r.num>9){this.puzzle[r.r][r.c]=0;break}if(!n&&0==s){if(!t)return!1;e=!0}if(n?s++:(r.num=1,s--,this.missing[s].num++),s==this.missing.length){if(!t)return!0;i.push(JSON.parse(JSON.stringify(this.puzzle))),s--,this.missing[s].num++,this.puzzle[r.r][r.c]=0}2==i.length&&(e=!0)}return i}checkValidity(t,e,s){if(s>9)return!1;for(var i=0;i<9;i++)if(s==this.puzzle[i][e])return!1;for(i=0;i<9;i++)if(s==this.puzzle[t][i])return!1;var r=3*Math.floor(t/3),n=3*Math.floor(e/3);for(i=0;i<3;i++)for(var o=0;o<3;o++){var a=r+o,l=n+i;if(this.puzzle[a][l]==s)return!1}return!0}}class s{canBeDug=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];visited=0;tg=null;solution=[];gpuzzle=null;totalGivens=0;lowerBound=0;dugCount=0;constructor(){this.tg=new t,this.gpuzzle=this.tg.gen(),this.solution=JSON.parse(JSON.stringify(this.gpuzzle))}easy(){for(console.log(this.gpuzzle),this.lowerBound=4,this.totalGivens=13*Math.random()+36;this.dugCount<80-this.totalGivens&&80!=this.visited;){let t=Math.floor(9*Math.random()),e=Math.floor(9*Math.random());0==this.canBeDug[e][t]&&(this.checkLowerBound(e,t)&&(this.checkUniqu(e,t,this.gpuzzle[e][t])&&(this.gpuzzle[e][t]=0,this.dugCount++),this.visited++),this.canBeDug[e][t]=1)}return console.log(this.dugCount),console.log(this.visited),JSON.parse(JSON.stringify(this.gpuzzle))}medium(){for(this.lowerBound=3,this.totalGivens=3*Math.random()+35;this.dugCount<80-this.totalGivens&&80!=this.visited;){let t=Math.floor(9*Math.random()),e=Math.floor(9*Math.random());0==this.canBeDug[e][t]&&(this.checkLowerBound(e,t)&&(this.checkUniqu(e,t,this.gpuzzle[e][t])&&(this.gpuzzle[e][t]=0,this.dugCount++),this.visited++),this.canBeDug[e][t]=1)}return console.log(this.dugCount),console.log(this.visited),JSON.parse(JSON.stringify(this.gpuzzle))}difficult(){this.lowerBound=2,this.totalGivens=3*Math.random()+28;let t=0,e=0;for(;this.dugCount<80-this.totalGivens&&80!=this.visited;)console.log(t+" "+e),0==this.canBeDug[e][t]&&(this.checkLowerBound(e,t)&&(this.checkUniqu(e,t,this.gpuzzle[e][t])&&(this.gpuzzle[e][t]=0,this.dugCount++),this.visited++),this.canBeDug[e][t]=1),0==e?(t+=Math.floor(3*Math.random()+1),t>8&&(e++,t=8)):1==e?(t-=Math.floor(3*Math.random()+1),t<0&&(e++,t=0)):e%2==0?(t+=Math.floor(3*Math.random()+1),t>8&&(e++,t=8)):(t-=Math.floor(3*Math.random()+1),t<0&&(e++,t=0)),9==e&&(e=0,t=Math.floor(3*Math.random()));return console.log(this.dugCount),console.log(this.visited),JSON.parse(JSON.stringify(this.gpuzzle))}evil(){this.lowerBound=0,this.totalGivens=5*Math.random()+22;let t=0,e=0;for(;this.dugCount<80-this.totalGivens&&80!=this.visited;)console.log(t+" "+e),0==this.canBeDug[e][t]&&(this.checkLowerBound(e,t)&&(this.checkUniqu(e,t,this.gpuzzle[e][t])&&(this.gpuzzle[e][t]=0,this.dugCount++),this.visited++),this.canBeDug[e][t]=1),t+=Math.floor(3*Math.random()),t>8&&(t=0,e++),e>8&&(e=0);return JSON.parse(JSON.stringify(this.gpuzzle))}checkUniqu(t,s,i){for(var r=new e,n=1;n<10;n++)if(n!=i&&this.checkValidity(t,s,n)){if(this.gpuzzle[t][s]=n,r.doesSolExist(this.gpuzzle))return this.gpuzzle[t][s]=i,!1;this.gpuzzle[t][s]=0}return!0}checkLowerBound(t,e){for(var s=0,i=0;i<9;i++)0!=this.gpuzzle[t][i]&&s++;if(s<this.lowerBound)return!1;var r=0;for(i=0;i<9;i++)0!=this.gpuzzle[e][i]&&r++;return!(r<this.lowerrBound)}checkValidity(t,e,s){if(s>9)return!1;for(var i=0;i<9;i++)if(s==this.gpuzzle[i][e])return!1;for(i=0;i<9;i++)if(s==this.gpuzzle[t][i])return!1;var r=3*Math.floor(t/3),n=3*Math.floor(e/3);for(i=0;i<3;i++)for(var o=0;o<3;o++){let t=r+o,e=n+i;if(this.gpuzzle[t][e]==s)return!1}return!0}}var i=!1,r=null,n=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],o=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],a=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];if(null!=c("gameSave")){var l=c("gameSave");n=l.solution,o=l.currentBoard,a=l.currentBoardNotes}function u(t,e){return document.querySelector('[data-row="'+t+'"]  [data-col="'+e+'"]')}function h(t){if(null!=r){let e=parseInt(r.parentElement.dataset.row),s=parseInt(r.dataset.col);"up"==t?1!=e?(r.classList.remove("tdActive"),(r=u(e-1,s)).classList.add("tdActive")):(r.classList.remove("tdActive"),(r=u(9,s)).classList.add("tdActive")):"down"==t?9!=e?(r.classList.remove("tdActive"),(r=u(e+1,s)).classList.add("tdActive")):(r.classList.remove("tdActive"),(r=u(1,s)).classList.add("tdActive")):"left"==t?1!=s?(r.classList.remove("tdActive"),(r=u(e,s-1)).classList.add("tdActive")):(r.classList.remove("tdActive"),(r=u(e,9)).classList.add("tdActive")):"right"==t&&(9!=e?(r.classList.remove("tdActive"),(r=u(e,s+1)).classList.add("tdActive")):(r.classList.remove("tdActive"),(r=u(e,1)).classList.add("tdActive")))}else(r=u(1,1)).classList.add("tdActive")}function c(t){var e=document.cookie.match(new RegExp(t+"=([^;]+)"));return e&&(e=JSON.parse(e[1])),e}function d(){var t,e;t={solution:JSON.parse(JSON.stringify(n)),currentBoard:JSON.parse(JSON.stringify(o)),currentBoardNotes:JSON.parse(JSON.stringify(a))},e="gameSave="+JSON.stringify(t),document.cookie=e}document.getElementById("note").addEventListener("click",(t=>{document.getElementById("note").classList.toggle("active"),i=!i,stopProp=!0,t.stopPropagation()})),document.querySelector("table").addEventListener("click",(t=>{if(null!=r&&r.classList.toggle("tdActive"),r==t.target)r=null;else{var e=t.target;e.classList.toggle("tdActive"),r=e}t.stopPropagation()})),window.addEventListener("click",(t=>{null!=r&&(r.classList.toggle("tdActive"),r=null)})),window.addEventListener("keypress",(t=>{var e=t.key;if(isFinite(e)&&"0"!=e)!function(t){var e=document.getElementsByClassName("tdActive")[0];if(e&&!e.classList.contains("nonChangeable")){if(i)if(e.classList.contains("noteList")||(e.classList.add("noteList"),e.innerHTML=""),""==e.innerHTML)e.innerHTML=t;else if(-1==e.innerHTML.search(t)){(s=(e.innerHTML+", "+t).split(", ")).sort(),e.innerHTML="",s.forEach(((t,s)=>{e.innerHTML+=0==s?t:", "+t}));let i=e.parentElement.dataset.row,r=e.dataset.col;o[parseInt(i)-1][parseInt(r)-1]=0,a[parseInt(i)-1][parseInt(r)-1]=e.innerText}else{var s;(s=e.innerHTML.split(", ")).sort();var r=s.indexOf(t);s.splice(r,1),e.innerHTML="",s.forEach(((t,s)=>{e.innerHTML+=0==s?t:", "+t}));let i=e.parentElement.dataset.row,n=e.dataset.col;a[parseInt(i)-1][parseInt(n)-1]=e.innerText}else{e.classList.contains("noteList")&&e.classList.toggle("noteList"),e.innerHTML=t;let s=e.parentElement.dataset.row,i=e.dataset.col;o[parseInt(s)-1][parseInt(i)-1]=parseInt(t),a[parseInt(s)-1][parseInt(i)-1]=0,function(){for(var t=0;t<9;t++)for(var e=0;e<9;e++)if(n[t][e]!=o[t][e])return;alert("CONGRATS YOU DID IT")}()}d()}}(e);else if("e"==e)document.getElementById("note").classList.toggle("active"),i=!i;else if("a"==e)h("left");else if("w"==e)h("up");else if("d"==e)h("right");else if("s"==e)h("down");else if("q"==e&&r&&!r.classList.contains("nonChangeable")){r.innerHTML="";var s=r.parentElement.dataset.row-1,l=r.dataset.col-1;o[s][l]=0,a[s][l]=0}})),document.getElementById("loadGame").addEventListener("click",(t=>{!function(t){var e,i=new s;n=JSON.parse(JSON.stringify(i.solution)),"easy"==t?e=i.easy():"medium"==t?e=i.medium():"difficult"==t?e=i.difficult():"evil"==t&&(e=i.evil()),o=JSON.parse(JSON.stringify(n));for(var r=1;r<10;r++)for(var a=1;a<10;a++){var l=u(r,a);0!=e[r-1][a-1]?(l.innerText=e[r-1][a-1],l.classList.add("nonChangeable"),l.classList.remove("noteList")):(l.innerText="",l.classList.remove("nonChangeable"),l.classList.remove("noteList"))}d()}(document.getElementById("level").value)}))})();