(()=>{"use strict";class t{puzzle=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];gen(){let t=new e;for(var i=1;12!=i;){var s=Math.floor(9*Math.random()),r=Math.floor(9*Math.random()),n=Math.floor(9*Math.random()+1);0==this.puzzle[r][s]&&this.checkValidity(s,r,n)&&(this.puzzle[r][s]=n,i++)}return t.solve(this.puzzle),console.log(t.puzzle),JSON.parse(JSON.stringify(t.puzzle))}isPuzzleFilled(){for(var t=0;t<this.puzzle.length;t++)if(9!=this.puzzle[t].length)return!1;return!0}checkValidity(t,e,i){for(var s=0;s<9;s++)if(i==this.puzzle[s][t])return!1;for(s=0;s<9;s++)if(i==this.puzzle[e][s])return!1;var r=3*Math.floor(e/3),n=3*Math.floor(t/3);for(s=0;s<3;s++)for(var a=0;a<3;a++){var o=r+a,l=n+s;if(this.puzzle[o][l]==i)return!1}return!0}print(){for(var t=0;t<9;t++)console.log(this.puzzle[t][0]+" "+this.puzzle[t][1]+" "+this.puzzle[t][2]+" "+this.puzzle[t][3]+" "+this.puzzle[t][4]+" "+this.puzzle[t][5]+" "+this.puzzle[t][6]+" "+this.puzzle[t][7]+" "+this.puzzle[t][8])}}class e{root=null;start=null;puzzle=[];missing=[];solve(t){return this.puzzle=JSON.parse(JSON.stringify(t)),this.findMissing(),this.traverse(!1),this.puzzle}doesSolExist(t){return this.puzzle=JSON.parse(JSON.stringify(t)),this.findMissing(),this.traverse(!1)}solveMulti(t){return this.puzzle=JSON.parse(JSON.stringify(t)),this.findMissing(),this.traverse(!0)}findMissing(){for(var t=0;t<9;t++)for(var e=0;e<9;e++)0==this.puzzle[t][e]&&this.missing.push({r:t,c:e,num:1})}traverse(t){for(var e=!1,i=0,s=[];!e;){for(var r=this.missing[i],n=!1;!n;)if(this.checkValidity(r.r,r.c,r.num)?(this.puzzle[r.r][r.c]=r.num,n=!0):r.num++,r.num>9){this.puzzle[r.r][r.c]=0;break}if(!n&&0==i){if(!t)return!1;e=!0}if(n?i++:(r.num=1,i--,this.missing[i].num++),i==this.missing.length){if(!t)return!0;s.push(JSON.parse(JSON.stringify(this.puzzle))),i--,this.missing[i].num++,this.puzzle[r.r][r.c]=0}2==s.length&&(e=!0)}return s}checkValidity(t,e,i){if(i>9)return!1;for(var s=0;s<9;s++)if(i==this.puzzle[s][e])return!1;for(s=0;s<9;s++)if(i==this.puzzle[t][s])return!1;var r=3*Math.floor(t/3),n=3*Math.floor(e/3);for(s=0;s<3;s++)for(var a=0;a<3;a++){var o=r+a,l=n+s;if(this.puzzle[o][l]==i)return!1}return!0}}class i{canBeDug=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];visited=0;tg=null;solution=[];gpuzzle=null;totalGivens=0;lowerBound=0;dugCount=0;constructor(){this.tg=new t,this.gpuzzle=this.tg.gen(),this.solution=JSON.parse(JSON.stringify(this.gpuzzle))}easy(){for(this.lowerBound=4,this.totalGivens=13*Math.random()+36;this.dugCount<80-this.totalGivens&&80!=this.visited;){let t=Math.floor(9*Math.random()),e=Math.floor(9*Math.random());0==this.canBeDug[e][t]&&(this.checkLowerBound(e,t)&&(this.checkUniqu(e,t,this.gpuzzle[e][t])&&(this.gpuzzle[e][t]=0,this.dugCount++),this.visited++),this.canBeDug[e][t]=1)}return JSON.parse(JSON.stringify(this.gpuzzle))}medium(){for(this.lowerBound=3,this.totalGivens=3*Math.random()+35;this.dugCount<80-this.totalGivens&&80!=this.visited;){let t=Math.floor(9*Math.random()),e=Math.floor(9*Math.random());0==this.canBeDug[e][t]&&(this.checkLowerBound(e,t)&&(this.checkUniqu(e,t,this.gpuzzle[e][t])&&(this.gpuzzle[e][t]=0,this.dugCount++),this.visited++),this.canBeDug[e][t]=1)}return console.log(this.dugCount),console.log(this.visited),JSON.parse(JSON.stringify(this.gpuzzle))}difficult(){this.lowerBound=2,this.totalGivens=3*Math.random()+28;let t=0,e=0;for(;this.dugCount<80-this.totalGivens&&80!=this.visited;)console.log(t+" "+e),0==this.canBeDug[e][t]&&(this.checkLowerBound(e,t)&&(this.checkUniqu(e,t,this.gpuzzle[e][t])&&(this.gpuzzle[e][t]=0,this.dugCount++),this.visited++),this.canBeDug[e][t]=1),0==e?(t+=Math.floor(3*Math.random()+1),t>8&&(e++,t=8)):1==e?(t-=Math.floor(3*Math.random()+1),t<0&&(e++,t=0)):e%2==0?(t+=Math.floor(3*Math.random()+1),t>8&&(e++,t=8)):(t-=Math.floor(3*Math.random()+1),t<0&&(e++,t=0)),9==e&&(e=0,t=Math.floor(3*Math.random()));return console.log(this.dugCount),console.log(this.visited),JSON.parse(JSON.stringify(this.gpuzzle))}evil(){this.lowerBound=0,this.totalGivens=5*Math.random()+22;let t=0,e=0;for(;this.dugCount<80-this.totalGivens&&80!=this.visited;)console.log(t+" "+e),0==this.canBeDug[e][t]&&(this.checkLowerBound(e,t)&&(this.checkUniqu(e,t,this.gpuzzle[e][t])&&(this.gpuzzle[e][t]=0,this.dugCount++),this.visited++),this.canBeDug[e][t]=1),t+=Math.floor(3*Math.random()),t>8&&(t=0,e++),e>8&&(e=0);return JSON.parse(JSON.stringify(this.gpuzzle))}checkUniqu(t,i,s){for(var r=new e,n=1;n<10;n++)if(n!=s&&this.checkValidity(t,i,n)){if(this.gpuzzle[t][i]=n,r.doesSolExist(this.gpuzzle))return this.gpuzzle[t][i]=s,!1;this.gpuzzle[t][i]=0}return!0}checkLowerBound(t,e){for(var i=0,s=0;s<9;s++)0!=this.gpuzzle[t][s]&&i++;if(i<this.lowerBound)return!1;var r=0;for(s=0;s<9;s++)0!=this.gpuzzle[e][s]&&r++;return!(r<this.lowerrBound)}checkValidity(t,e,i){if(i>9)return!1;for(var s=0;s<9;s++)if(i==this.gpuzzle[s][e])return!1;for(s=0;s<9;s++)if(i==this.gpuzzle[t][s])return!1;var r=3*Math.floor(t/3),n=3*Math.floor(e/3);for(s=0;s<3;s++)for(var a=0;a<3;a++){let t=r+a,e=n+s;if(this.gpuzzle[t][e]==i)return!1}return!0}}var s=!1,r=null,n=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],a=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],o=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function l(t,e){return document.querySelector('[data-row="'+t+'"]  [data-col="'+e+'"]')}function u(t){if(null!=r){let e=parseInt(r.parentElement.dataset.row),i=parseInt(r.dataset.col);"up"==t?1!=e?(r.classList.remove("tdActive"),(r=l(e-1,i)).classList.add("tdActive")):(r.classList.remove("tdActive"),(r=l(9,i)).classList.add("tdActive")):"down"==t?9!=e?(r.classList.remove("tdActive"),(r=l(e+1,i)).classList.add("tdActive")):(r.classList.remove("tdActive"),(r=l(1,i)).classList.add("tdActive")):"left"==t?1!=i?(r.classList.remove("tdActive"),(r=l(e,i-1)).classList.add("tdActive")):(r.classList.remove("tdActive"),(r=l(e,9)).classList.add("tdActive")):"right"==t&&(9!=e?(r.classList.remove("tdActive"),(r=l(e,i+1)).classList.add("tdActive")):(r.classList.remove("tdActive"),(r=l(e,1)).classList.add("tdActive")))}else(r=l(1,1)).classList.add("tdActive")}window.solution=n,document.getElementById("note").addEventListener("click",(t=>{var e=document.getElementById("note");e.classList.toggle("active"),e.innerHTML=s?"Note Mode":"Note Mode (Active)",s=!s,stopProp=!0,t.stopPropagation()})),document.querySelector("table").addEventListener("click",(t=>{if(null!=r&&r.classList.toggle("tdActive"),r==t.target)r=null;else{var e=t.target;e.classList.toggle("tdActive"),r=e}t.stopPropagation()})),window.addEventListener("click",(t=>{null!=r&&(r.classList.toggle("tdActive"),r=null)})),window.addEventListener("keypress",(t=>{var e=t.key;if(isFinite(e)&&"0"!=e)!function(t){var e=document.getElementsByClassName("tdActive")[0];if(e&&!e.classList.contains("nonChangeable"))if(s)if(e.classList.contains("noteList")||(e.classList.add("noteList"),e.innerHTML=""),""==e.innerHTML)e.innerHTML=t;else if(-1==e.innerHTML.search(t)){(i=(e.innerHTML+", "+t).split(", ")).sort(),e.innerHTML="",i.forEach(((t,i)=>{e.innerHTML+=0==i?t:", "+t}));let s=e.parentElement.dataset.row,r=e.dataset.col;a[parseInt(s)-1][parseInt(r)-1]=0,o[parseInt(s)-1][parseInt(r)-1]=e.innerText}else{var i;(i=e.innerHTML.split(", ")).sort();var r=i.indexOf(t);i.splice(r,1),e.innerHTML="",i.forEach(((t,i)=>{e.innerHTML+=0==i?t:", "+t}));let s=e.parentElement.dataset.row,n=e.dataset.col;o[parseInt(s)-1][parseInt(n)-1]=e.innerText}else{e.classList.contains("noteList")&&e.classList.toggle("noteList"),e.innerHTML=t;let i=e.parentElement.dataset.row,s=e.dataset.col;a[parseInt(i)-1][parseInt(s)-1]=parseInt(t),o[parseInt(i)-1][parseInt(s)-1]=0,function(){for(var t=0;t<9;t++)for(var e=0;e<9;e++)if(n[t][e]!=a[t][e])return;alert("CONGRATS YOU DID IT")}()}}(e);else if("e"==e){var i=document.getElementById("note");i.classList.toggle("active"),i.innerHTML=s?"Note Mode":"Note Mode (Active)",s=!s}else if("a"==e)u("left");else if("w"==e)u("up");else if("d"==e)u("right");else if("s"==e)u("down");else if("q"==e&&r&&!r.classList.contains("nonChangeable")){r.innerHTML="";var l=r.parentElement.dataset.row-1,h=r.dataset.col-1;a[l][h]=0,o[l][h]=0}})),document.getElementById("loadGame").addEventListener("click",(t=>{!function(t){var e,s=new i;n=JSON.parse(JSON.stringify(s.solution)),"easy"==t?e=s.easy():"medium"==t?e=s.medium():"difficult"==t?e=s.difficult():"evil"==t&&(e=s.evil()),a=JSON.parse(JSON.stringify(e));for(var r=1;r<10;r++)for(var o=1;o<10;o++){var u=l(r,o);0!=e[r-1][o-1]?(u.innerText=e[r-1][o-1],u.classList.add("nonChangeable"),u.classList.remove("noteList")):(u.innerText="",u.classList.remove("nonChangeable"),u.classList.remove("noteList"))}}(document.getElementById("level").value)}))})();